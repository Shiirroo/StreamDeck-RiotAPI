<!DOCTYPE HTML>
<html>

<head>
    <title>Riot Games Index</title>
    <meta charset="utf-8" />
    <script src="../foundation/common.js"></script>
    <script src="../foundation/moment.js"></script>
    <script src="../foundation/jquery-3.3.1.js"></script>
    <script src="./request.js"></script>
    <script src="./leagueoflegends/summoner.js"></script>
    <script src="./leagueoflegends/main.js"></script>
    <script src="./utilis/utilts.js"></script>
</head>

<body>
    <script>

        let intervals = {};

        if ($SD) {
            const actionName = ["de.shiro.leauge.api.action", "de.shiro.tft.api.action", "de.shiro.lor.api.action", "de.shiro.valorant.api.action"];

            $SD.on("connected", function (jsonObj) {
                console.log("Connected!");
            });

            $.each(actionName, function (index) {
                $SD.on(actionName[index] + ".willAppear", function (jsonObj) {
                    if (jsonObj.payload.settings.automaticRefresh !== 0 & jsonObj.payload.settings.apiKey != undefined) {
                        listener(jsonObj.context, jsonObj.payload.settings, jsonObj.device, actionName[index]);
                    }
                });
                $SD.on(actionName[index] + ".sendToPlugin", function (jsonObj) {
                    $SD.api.setSettings(jsonObj.context, jsonObj.payload);
                    listener(jsonObj.context, jsonObj.payload, null, actionName[index]);
                });

                $SD.on(actionName[index] + ".keyUp", function (jsonObj) {
                    listener(jsonObj.context, jsonObj.payload.settings, jsonObj.device, actionName[index]);
                })
            });

            function listener(context, settings, device, code) {
                switch (code) {
                    case "de.shiro.leauge.api.action":
                        initiateRiotStatus(context, settings, device);
                        break;
                    case "de.shiro.tft.api.action":
                        break;
                    case "de.shiro.lor.api.action":
                        break;
                    case "de.shiro.valorant.api.action":
                        break;

                    default:
                        break;
                }
            }

        }

    </script>

</body>

</html>